<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JP6EY71M2B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-JP6EY71M2B');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5209187567555173"
     crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CTM - Como Tan Muchacho</title>
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
            transition: background-color 0.5s ease; /* Agregar transición para suavizar el cambio de color */
        }

        #video-container {
            position: relative;
            width: 640px;
            height: 360px;
            margin-bottom: 20px;
        }

        #videoFrame {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        #sound-image {
            cursor: pointer;
            width: 126px;
            height: 128px;
        }
    </style>
</head>
<body>

<!-- Espacio arriba para publicidad -->
<div id="adsense-top">
    <!-- Coloca aquí tu código de AdSense -->
</div>

<!-- Contenedor del video -->
<div id="video-container">
    <!-- El reproductor de video se cargará aquí -->
    <video id="videoFrame" autoplay loop controls>
        <source src="ctm.mp4" type="video/mp4">
        Tu navegador no soporta el elemento de video.
    </video>
</div>

<!-- Espacio abajo para publicidad -->
<div id="adsense-bottom">
    <!-- Coloca aquí tu código de AdSense -->
</div>

<!-- Imagen para reproducir sonido -->
<img id="sound-image" src="benson.png" alt="Reproducir CTM">

<!-- Script para reproducir sonido al hacer clic en la imagen -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var video = document.getElementById('videoFrame');
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var ambientLight = document.body.style;
        var audio = new Audio('como-tan-muchacho.mp3');
        var soundImage = document.getElementById('sound-image');

        video.addEventListener('loadeddata', function() {
            // Se ejecuta cuando el video está listo para reproducirse
            setInterval(function() {
                // Extraer el color dominante del centro del video
                ctx.drawImage(video, video.width / 4, video.height / 4, video.width / 2, video.height / 2);
                var data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                var color = getDominantColor(data);

                // Ajustar la intensidad de la luz de fondo según el color dominante
                var intensity = (color[0] + color[1] + color[2]) / 3 / 255;
                ambientLight.backgroundColor = 'rgba(' + color[0] + ',' + color[1] + ',' + color[2] + ',' + intensity + ')';
            }, 1000); // Actualizar el color cada segundo
        });

        soundImage.addEventListener('click', function() {
            audio.play();
        });

        function getDominantColor(data) {
            var color = [0, 0, 0];
            var totalPixels = data.length / 4;

            for (var i = 0; i < data.length; i += 4) {
                color[0] += data[i];
                color[1] += data[i + 1];
                color[2] += data[i + 2];
            }

            color[0] = Math.round(color[0] / totalPixels);
            color[1] = Math.round(color[1] / totalPixels);
            color[2] = Math.round(color[2] / totalPixels);

            return color;
        }
    });
</script>

</body>
</html>
